# ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤ –≤ PropertyFilter

## üêõ **–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –Ω–∞–π–¥–µ–Ω–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞:**

### **–ö–æ—Ä–µ–Ω—å –ø—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå **PropertyFilter** –æ—Ç–æ–±—Ä–∞–∂–∞–ª "0 —Ç–æ–≤–∞—Ä–æ–≤" –¥–ª—è –≤—Å–µ—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Å–≤–æ–π—Å—Ç–≤
- ‚ùå **–ù–µ –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å** —Ä–µ–∞–ª—å–Ω—ã–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ API
- ‚ùå **–í –∫–æ–¥–µ** –±—ã–ª–æ –∂–µ—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–æ `count: 0` —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º TODO

### **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- ‚úÖ **–°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è** `loadProductCounts` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ **PropertyFilter** —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–∑ API
- ‚úÖ **–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è** –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è

## üîß **–ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**

### **1. –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `loadProductCounts`:**
```typescript
const loadProductCounts = async (propertyName: string, propertyValues: string[]) => {
  // –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Å–≤–æ–π—Å—Ç–≤–∞
  const countPromises = propertyValues.map(async (value) => {
    const response = await fetch(`/api/catalog/products/images?${query.toString()}`);
    if (response.ok) {
      const data = await response.json();
      return { value, count: data.productCount || 0 };
    }
    return { value, count: 0 };
  });
  
  // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–∞—Ä—Ç—É –∑–Ω–∞—á–µ–Ω–∏–π –∏ –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤
  return countMap;
};
```

### **2. –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–ø—Ü–∏–π:**
```typescript
// –ë–´–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
const optionsWithImages = uniqueValues.map(value => ({
  value,
  label: value,
  count: 0, // TODO: –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Å—á–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤
  image: images[value] || null
}));

// –°–¢–ê–õ–û (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
const [images, counts] = await Promise.all([
  loadProductImages(propertyName, uniqueValues),
  loadProductCounts(propertyName, uniqueValues)
]);

const optionsWithImages = uniqueValues.map(value => ({
  value,
  label: value,
  count: counts[value] || 0, // –†–µ–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤
  image: images[value] || null
}));
```

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

### **1. –ü—Ä–æ–≤–µ—Ä–∫–∞ API endpoint:**
```bash
# API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤:
curl "http://localhost:3000/api/catalog/products/images?categoryIds=cmg50xcgs001cv7mn0tdyk1wo&propertyName=Domeo_%D0%9D%D0%B0%D0%B7%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%BC%D0%BE%D0%B4%D0%B5%D0%BB%D0%B8%20%D0%B4%D0%BB%D1%8F%20Web&propertyValue=DomeoDoors_Base_1"

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
{
  "success": true,
  "images": [],
  "count": 0,
  "productCount": 479  # ‚Üê –†–µ–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤
}
```

### **2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
1. **–û—Ç–∫—Ä–æ–π—Ç–µ** `http://localhost:3000/professional-builder`
2. **–î–æ–±–∞–≤—å—Ç–µ** PropertyFilter –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–∞ –∫–∞–Ω–≤–∞—Å
3. **–í—ã–±–µ—Ä–∏—Ç–µ** –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Å —Ç–æ–≤–∞—Ä–∞–º–∏
4. **–í—ã–±–µ—Ä–∏—Ç–µ** —Å–≤–æ–π—Å—Ç–≤–æ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ**, —á—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤

### **3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:**
- ‚úÖ **–ï—Å—Ç—å –ª–æ–≥–∏** –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ **PropertyFilter** –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- ‚úÖ **–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è** —Ä–µ–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤

## üìä **–°—Ç–∞—Ç—É—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

- **API endpoint**: ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤
- **PropertyFilter**: ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
- **–§—É–Ω–∫—Ü–∏—è –ø–æ–¥—Å—á–µ—Ç–∞**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**: ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤

## üîç **–í–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏:**

### **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥—Å—á–µ—Ç:**
1. **PropertyFilter** –ø–æ–ª—É—á–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å–≤–æ–π—Å—Ç–≤–∞
2. **–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è** –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ —á–µ—Ä–µ–∑ API
3. **API** –Ω–∞—Ö–æ–¥–∏—Ç —Ç–æ–≤–∞—Ä—ã —Å —ç—Ç–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º —Å–≤–æ–π—Å—Ç–≤–∞
4. **API** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `productCount` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
5. **PropertyFilter** –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —ç—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

### **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤ —á–µ—Ä–µ–∑ `Promise.all`
- **–û–¥–∏–Ω API endpoint** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üéØ **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ** PropertyFilter –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. **–£–±–µ–¥–∏—Ç–µ—Å—å**, —á—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤
3. **–°–æ–∑–¥–∞–π—Ç–µ —Å–≤—è–∑–∏** –º–µ–∂–¥—É PropertyFilter –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é** —Ñ–∏–ª—å—Ç—Ä–æ–≤
5. **–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏** –¥–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

## üöÄ **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

PropertyFilter —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Å–≤–æ–π—Å—Ç–≤–∞. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å, —Å–∫–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä–æ–≤ –¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ñ–∏–ª—å—Ç—Ä–∞, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç!
