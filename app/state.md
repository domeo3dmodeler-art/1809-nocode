Title: Domeo ‚Äî State (Doors Pilot)
Owner: @Team Leads + @GPT
Last updated (Europe/Paris): 2025-09-11
Related: [Master Spec](./master_spec.md), [Roadmap](./roadmap.md), [Admin Guide](./admin_guide.md),
         [Data Import Guide Doors](./data_import_guide_doors.md), [Spec –ö–ü –∏ —Ñ–æ—Ä–º—É–ª—ã](./spec_kp_formulas.md)

# STATE ‚Äî Live (2025-09-11)

---

## –†–æ–ª–∏
- **GPT (–≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞):** –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–æ–µ–∫—Ç–∞. –í–µ–¥—ë—Ç –∫–æ–¥ (backend, frontend, CI/CD), —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (`master_spec.md`, `roadmap.md`, `state.md`, `admin_guide.md`, `data_import_guide_doors.md`, `spec_kp_formulas.md`, `sync_guide.md`).

---

## –ì–æ—Ç–æ–≤–æ ‚úÖ
- –í–ú –≤ Yandex Cloud –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ (SSH, sudo).
- Node 20, Docker, Postgres (Docker) —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã.
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Next.js —Å–æ–±—Ä–∞–Ω–æ (prod) –∏ –∑–∞–ø—É—â–µ–Ω–æ.
- Nginx —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω –∫–∞–∫ reverse proxy –Ω–∞ :80 ‚Üí :3000.
- Prisma –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã (`init`), –ë–î —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞.
- –ë–∞–∑–æ–≤–∞—è –∞–¥–º–∏–Ω–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ /admin (JWT-—Å–∏–¥ –∞–¥–º–∏–Ω–∞).
- API /api/auth/login –∏ /api/categories —Ä–∞–±–æ—Ç–∞—é—Ç.

---

## –í —Ä–∞–±–æ—Ç–µ üõ†
- –ê–¥–º–∏–Ω: CRUD –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤ (schemaJson, rulesJson).
- UI —Ä–µ–Ω–¥–µ—Ä —Ñ–æ—Ä–º –ø–æ JSON-—Å—Ö–µ–º–µ + –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä.
- –ú–∏–Ω–∏-–¥–≤–∏–∂–æ–∫ –ø—Ä–∞–≤–∏–ª (Pricing v1) ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—É.
- –ò–º–ø–æ—Ä—Ç –ø–∏–ª–æ—Ç–∞ Doors (–ø—Ä–∞–π—Å—ã/—Å–≤–æ–π—Å—Ç–≤–∞/—Ñ–æ—Ç–æ) –≤ –ë–î.

---

## –ë–ª–æ–∫–µ—Ä—ã ‚õî
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ –ø—Ä–∞–π—Å—ã RRC –¥–ª—è Doors.
- –ú–µ–¥–∏–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ (—Å—Ç–∞—Ä—Ç–æ–≤—ã–π –Ω–∞–±–æ—Ä, –ø—É—Ç–∏/–∞–ª–∏–∞—Å—ã) ‚Äî –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã.

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ ‚ñ∂
- –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª ¬´–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã¬ª –≤ –∞–¥–º–∏–Ω–∫–µ (CRUD + JSON-—Ä–µ–¥–∞–∫—Ç–æ—Ä—ã).
- –í–∫–ª—é—á–∏—Ç—å –¥–≤–∏–∂–æ–∫ –ø—Ä–∞–≤–∏–ª —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è (PriceRule.rulesJson).
- –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–µ CSV/XLSX Doors –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—ã–±–æ—Ä–∫–∏.
- –ö–æ—Ä–∑–∏–Ω–∞ + —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–∞—Å—á—ë—Ç–∞ (Quote) + —ç–∫—Å–ø–æ—Ä—Ç –ö–ü (PDF/Excel).
- –û–±–µ—Ä–Ω—É—Ç—å –∑–∞–ø—É—Å–∫ –≤ systemd-unit (`domeo.service`) –¥–ª—è –∞–≤—Ç–æ—Å—Ç–∞—Ä—Ç–∞.

---

## DoD ‚Äî –ò–º–ø–æ—Ä—Ç Doors ‚úÖ
- [ ] –°–æ–±—Ä–∞–Ω —Å—Ç–∞—Ä—Ç–æ–≤—ã–π –ø—Ä–∞–π—Å (RRC) –∏ —Ñ–æ—Ç–æ.  
- [ ] –ó–∞–≥—Ä—É–∂–µ–Ω –≤ –∞–¥–º–∏–Ω–∫—É, –ø—Ä–æ–≤–µ—Ä–µ–Ω –º–∞–ø–ø–∏–Ω–≥.  
- [ ] –ü—Ä–æ–π–¥–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è, –æ—à–∏–±–∫–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã.  
- [ ] –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –†–†–¶ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã, –≤—ã–±—Ä–∞–Ω –∫–∞–Ω–æ–Ω.  
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω UPSERT –≤ –ë–î.  
- [ ] Smoke-—Ç–µ—Å—Ç—ã `/options`, `/price`, —ç–∫—Å–ø–æ—Ä—Ç –ö–ü/–ó–∞–∫–∞–∑ –ø—Ä–æ—à–ª–∏.  
- [ ] –í `state.md` –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –∏—Ç–æ–≥ (—Å—Å—ã–ª–∫–∞ –Ω–∞ –æ—Ç—á—ë—Ç, added/updated/skipped).  
