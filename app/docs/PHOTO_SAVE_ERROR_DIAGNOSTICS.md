# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

## ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:**
–ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–≤—è–∑–∫–∏ —Ñ–æ—Ç–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ—à–∏–±–∫–∞:
```
"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π: –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π"
```

## üîç **–ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:**

### **1. –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ API:**
```typescript
// app/app/api/admin/categories/[id]/route.ts
console.log('PUT /api/admin/categories/[id] - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:', {
  categoryId,
  hasPhotoMapping: !!photoMapping,
  hasPhotoData: !!photoData,
  photoMappingType: typeof photoMapping,
  photoDataType: typeof photoData
});

console.log('–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ photoMapping:', photoMapping);
console.log('–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ photoData:', photoData);
console.log('–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ë–î —Å –¥–∞–Ω–Ω—ã–º–∏:', updateData);
```

### **2. –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ DataUpload:**
```typescript
// app/components/category-builder/DataUpload.tsx
console.log('–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä:', {
  categoryId,
  photoMapping: mapping,
  photoData: requestBody.photoData
});

// –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
if (!response.ok) {
  const errorData = await response.json().catch(() => ({}));
  console.error('–û—à–∏–±–∫–∞ –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞:', {
    status: response.status,
    statusText: response.statusText,
    errorData
  });
  throw new Error(`–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π: ${errorData.error || response.statusText}`);
}
```

### **3. –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**
- ‚úÖ –ü–æ–ª—è `photo_mapping` –∏ `photo_data` —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –º–æ–¥–µ–ª–∏ `FrontendCategory`
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å —Å—Ö–µ–º–æ–π
- ‚úÖ API –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —ç—Ç–∏ –ø–æ–ª—è

## üöÄ **–ö–∞–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É:**

### **1. –û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools:**
```
F12 ‚Üí Console
```

### **2. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å —Å–≤—è–∑–∫–∏ —Ñ–æ—Ç–æ:**
```
1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–≤—è–∑–∫—É
3. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–≤–µ—Ä—à–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É"
```

### **3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏:**
```
–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä: { categoryId: "...", photoMapping: {...}, photoData: {...} }
PUT /api/admin/categories/[id] - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: { categoryId: "...", hasPhotoMapping: true, ... }
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ photoMapping: { mappingType: "by_sku", ... }
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ photoData: { totalCount: 26, files: [...] }
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ë–î —Å –¥–∞–Ω–Ω—ã–º–∏: { photo_mapping: "...", photo_data: "...", ... }
```

### **4. –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∞, –≤—ã —É–≤–∏–¥–∏—Ç–µ:**
```
–û—à–∏–±–∫–∞ –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞: {
  status: 500,
  statusText: "Internal Server Error",
  errorData: { error: "..." }
}
```

## üîß **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–∫–∏:**

### **1. –ü—Ä–æ–±–ª–µ–º—ã —Å JSON:**
```typescript
// –ï—Å–ª–∏ photoMapping –∏–ª–∏ photoData —Å–æ–¥–µ—Ä–∂–∞—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ —Å—Å—ã–ª–∫–∏
JSON.stringify(photoMapping) // –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫—É
```

### **2. –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö:**
```sql
-- –ï—Å–ª–∏ –ø–æ–ª—è photo_mapping –∏–ª–∏ photo_data –∏–º–µ—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
-- –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö
```

### **3. –ü—Ä–æ–±–ª–µ–º—ã —Å Prisma:**
```typescript
// –ï—Å–ª–∏ Prisma Client –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å—Ö–µ–º–æ–π
await prisma.frontendCategory.update({ ... }) // –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫—É
```

### **4. –ü—Ä–æ–±–ª–µ–º—ã —Å –¥–∞–Ω–Ω—ã–º–∏:**
```typescript
// –ï—Å–ª–∏ mapping.photoFiles —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ–∞–π–ª—ã –±–µ–∑ name
photoData.files.map(f => f.name) // –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫—É
```

## üìã **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

### **1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞:**
- –û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools (F12)
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Console
- –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å —Å–≤—è–∑–∫–∏ —Ñ–æ—Ç–æ
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å–µ –ª–æ–≥–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

### **2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞:**
- –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –≥–¥–µ –∑–∞–ø—É—â–µ–Ω Next.js
- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞
- –ù–∞–π–¥–∏—Ç–µ –æ—à–∏–±–∫–∏ Prisma –∏–ª–∏ JSON

### **3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã –∏–º–µ—é—Ç —Å–≤–æ–π—Å—Ç–≤–æ `name`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `mapping` –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö —Å—Å—ã–ª–æ–∫
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `categoryId` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

## üéØ **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏:

### **–£—Å–ø–µ—à–Ω—ã–π —Å–ª—É—á–∞–π:**
```
–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä: { categoryId: "clxxx", photoMapping: {...}, photoData: {...} }
PUT /api/admin/categories/[id] - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: { categoryId: "clxxx", hasPhotoMapping: true, hasPhotoData: true, photoMappingType: "object", photoDataType: "object" }
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ photoMapping: { mappingType: "by_sku", photoFiles: [...], mappedPhotos: {...} }
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ photoData: { totalCount: 26, files: ["photo1.jpg", "photo2.jpg", ...] }
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ë–î —Å –¥–∞–Ω–Ω—ã–º–∏: { photo_mapping: "{...}", photo_data: "{...}", updated_at: "2024-..." }
–ö–∞—Ç–µ–≥–æ—Ä–∏—è —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞: clxxx
–î–∞–Ω–Ω—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –ë–î
```

### **–û—à–∏–±–∫–∞:**
```
–û—à–∏–±–∫–∞ –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞: {
  status: 400,
  statusText: "Bad Request",
  errorData: { error: "–ù–µ —É–∫–∞–∑–∞–Ω ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" }
}
```

## üí° **–ë—ã—Å—Ç—Ä—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

### **1. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ "–ù–µ —É–∫–∞–∑–∞–Ω ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏":**
```typescript
// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ categoryId –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
console.log('categoryId:', categoryId); // –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ undefined
```

### **2. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ JSON.stringify:**
```typescript
// –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ —Å—Å—ã–ª–∫–∏
try {
  JSON.stringify(photoMapping);
} catch (e) {
  console.error('–û—à–∏–±–∫–∞ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ photoMapping:', e);
}
```

### **3. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ Prisma:**
```typescript
// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –ø–æ–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Å—Ö–µ–º–µ
console.log('updateData:', updateData);
```

## üéâ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

**–î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –æ—à–∏–±–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π!**

- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ API** - –≤–∏–¥–Ω–æ —á—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ DataUpload** - –≤–∏–¥–Ω–æ —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - —Ç–æ—á–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ö–µ–º—ã –ë–î** - –ø–æ–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

**–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ —Ç–æ—á–Ω—É—é –ø—Ä–∏—á–∏–Ω—É –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞!** üîç‚ú®




