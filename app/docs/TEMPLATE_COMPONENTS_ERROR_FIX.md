# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ template.components

## ‚úÖ **–û—à–∏–±–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!**

### üéØ **–ü—Ä–æ–±–ª–µ–º–∞:**
–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ—è–≤–ª—è–ª–∞—Å—å –æ—à–∏–±–∫–∞:
**"TypeError: Cannot read properties of undefined (reading 'length')"**

### üîç **–ü—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏:**
–í —Å—Ç—Ä–æ–∫–µ 216 –∫–æ–¥ –ø—ã—Ç–∞–ª—Å—è –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ `template?.components?.length`, –Ω–æ `template.components` –±—ã–ª `undefined`, –ø–æ—ç—Ç–æ–º—É –Ω–µ–ª—å–∑—è –±—ã–ª–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ `length`.

### üõ†Ô∏è **–ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**

#### **1. –£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ currentTemplate:**
- ‚ùå **–î–û**: `const currentTemplate = template || defaultTemplate;`
- ‚úÖ **–ü–û–°–õ–ï**: `const currentTemplate = template && template.components && template.layout ? template : defaultTemplate;`

#### **2. –£–ø—Ä–æ—â–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**
- ‚ùå **–î–û**: `{template?.components?.length || currentTemplate.components.length}`
- ‚úÖ **–ü–û–°–õ–ï**: `{currentTemplate.components.length}`

#### **3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ template:**
- ‚úÖ **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: `{currentTemplate.components.length}`
- ‚úÖ **–°–µ—Ç–∫–∞**: `{currentTemplate.layout.columns}`
- ‚úÖ **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å**: `{currentTemplate.layout.responsive ? '–î–∞' : '–ù–µ—Ç'}`
- ‚úÖ **Layout**: `gap-${currentTemplate.layout.gap}` –∏ `grid-cols-${currentTemplate.layout.columns}`

### üîÑ **–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**

#### **1. –ü—Ä–æ–≤–µ—Ä–∫–∞ template:**
```typescript
const currentTemplate = template && template.components && template.layout ? template : defaultTemplate;
```

**–£—Å–ª–æ–≤–∏—è –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è template:**
- ‚úÖ `template` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚úÖ `template.components` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ —è–≤–ª—è–µ—Ç—Å—è –º–∞—Å—Å–∏–≤–æ–º
- ‚úÖ `template.layout` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

**–ï—Å–ª–∏ –ª—é–±–æ–µ —É—Å–ª–æ–≤–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `defaultTemplate` (–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –≤–∞–ª–∏–¥–Ω—ã–π)

#### **2. –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:**
```typescript
// –í—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç currentTemplate (–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –≤–∞–ª–∏–¥–Ω—ã–π)
{currentTemplate.components.length}
{currentTemplate.layout.columns}
{currentTemplate.layout.responsive ? '–î–∞' : '–ù–µ—Ç'}
```

#### **3. Fallback –∑–Ω–∞—á–µ–Ω–∏—è:**
```typescript
const defaultTemplate: PageTemplate = {
  id: 'default',
  name: '–ë–∞–∑–æ–≤—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä',
  description: '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä —Ç–æ–≤–∞—Ä–æ–≤',
  layout: {
    type: 'grid',
    columns: 3,
    gap: 4,
    responsive: true
  },
  components: [
    // –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –≤–∞–ª–∏–¥–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
  ]
};
```

### üé® **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:**

#### **1. –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- ‚úÖ **–û–¥–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞** –≤ –Ω–∞—á–∞–ª–µ –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ –∫–æ–¥–µ
- ‚úÖ **–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –≤–∞–ª–∏–¥–Ω—ã–π** `currentTemplate`
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∫–æ–¥–∞** - –Ω–µ—Ç —Å–ª–æ–∂–Ω—ã—Ö —É—Å–ª–æ–≤–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π

#### **2. –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:**
- ‚úÖ **–ù–µ—Ç –æ—à–∏–±–æ–∫** –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **Graceful degradation** - –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞—é—â–∏–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä
- ‚úÖ **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ** - –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å fallback

#### **3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ **–ú–µ–Ω—å—à–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π** –≤ render
- ‚úÖ **–ü—Ä–æ—â–µ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è** –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- ‚úÖ **–ú–µ–Ω—å—à–µ —É—Å–ª–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏** –≤ JSX

### üöÄ **URL –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏**: `http://localhost:3000/admin/categories/[id]/configurator`

### üìã **–ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

#### **–¢–µ—Å—Ç 1: –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä**
1. **–°–æ–∑–¥–∞–π—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é** —á–µ—Ä–µ–∑ `/admin/categories/builder`
2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞** `/admin/categories`
3. **–ù–∞–∂–º–∏—Ç–µ "–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä"** –Ω–∞ –ª—é–±–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ù–ï–¢ –æ—à–∏–±–∫–∏, —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

#### **–¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —à–∞–±–ª–æ–Ω–µ**
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª** "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —à–∞–±–ª–æ–Ω–µ"
2. **–î–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è**:
   - –ù–∞–∑–≤–∞–Ω–∏–µ: "–ë–∞–∑–æ–≤—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä" (–∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–∑ template)
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤: 3 (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
   - –°–µ—Ç–∫–∞: 3 –∫–æ–ª–æ–Ω–∫–∏
   - –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å: –î–∞

#### **–¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–∞**
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–∞
2. **–î–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è**:
   - –í—ã–±–æ—Ä —Å—Ç–∏–ª—è
   - –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏
   - –ö–æ—Ä–∑–∏–Ω–∞

### üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

#### **1. –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```typescript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è
const isValidTemplate = template && 
                       template.components && 
                       Array.isArray(template.components) && 
                       template.layout &&
                       typeof template.layout === 'object';

const currentTemplate = isValidTemplate ? template : defaultTemplate;
```

#### **2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ defaultTemplate:**
```typescript
const defaultTemplate: PageTemplate = {
  id: 'default',
  name: '–ë–∞–∑–æ–≤—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä',
  description: '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä —Ç–æ–≤–∞—Ä–æ–≤',
  layout: {
    type: 'grid',        // –¢–∏–ø –º–∞–∫–µ—Ç–∞
    columns: 3,          // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–ª–æ–Ω–æ–∫
    gap: 4,             // –û—Ç—Å—Ç—É–ø—ã
    responsive: true    // –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
  },
  components: [
    // 3 –±–∞–∑–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–∞
    { id: 'style-selector', ... },
    { id: 'model-selector', ... },
    { id: 'cart-panel', ... }
  ]
};
```

#### **3. –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:**
```typescript
// –í—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω—ã, —Ç–∞–∫ –∫–∞–∫ currentTemplate –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –≤–∞–ª–∏–¥–Ω—ã–π
<div className={`grid gap-${currentTemplate.layout.gap} grid-cols-${currentTemplate.layout.columns}`}>
  {currentTemplate.components.map(component => (
    <NoCodeComponentRenderer key={component.id} {...component} />
  ))}
</div>
```

### üéâ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

**–û—à–∏–±–∫–∞ template.components –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!**

- ‚úÖ **–ù–µ—Ç –æ—à–∏–±–æ–∫** –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞** - –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚úÖ **Graceful degradation** - –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ–π –∫–æ–¥** - –Ω–µ—Ç —Å–ª–æ–∂–Ω—ã—Ö —É—Å–ª–æ–≤–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ** - –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å fallback
- ‚úÖ **–•–æ—Ä–æ—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –º–µ–Ω—å—à–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –≤ render

**–°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ!** üé®‚ú®




