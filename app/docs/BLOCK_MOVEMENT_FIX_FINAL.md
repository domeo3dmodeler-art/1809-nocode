# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –±–ª–æ–∫–æ–≤ –º—ã—à–∫–æ–π

## ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:**
–ë–ª–æ–∫–∏ –Ω–µ –ø–µ—Ä–µ–º–µ—â–∞—é—Ç—Å—è –º—ã—à–∫–æ–π –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏.

## üéØ **–ü—Ä–∏—á–∏–Ω—ã:**

### 1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ useCallback
- `createBlock` –Ω–µ –±—ã–ª –æ–±–µ—Ä–Ω—É—Ç –≤ `useCallback`
- `snapToGrid` –Ω–µ –±—ã–ª –æ–±–µ—Ä–Ω—É—Ç –≤ `useCallback`
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ `handleMouseDown` –±—ã–ª–∏ –Ω–µ–ø–æ–ª–Ω—ã–º–∏

### 2. –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–∑–ª–∏—á–µ–Ω–∏—è –∫–ª–∏–∫–∞ –∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
- –°–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É –≤—ã–±–æ—Ä–æ–º –±–ª–æ–∫–∞ –∏ –Ω–∞—á–∞–ª–æ–º –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è

## ‚úÖ **–†–µ—à–µ–Ω–∏–µ:**

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã useCallback –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```typescript
// ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –±–ª–æ–∫–∞ —Å useCallback:
const createBlock = useCallback((type: BlockSettings['type'], x: number, y: number): BlockSettings => {
  // ... –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –±–ª–æ–∫–∞
}, [blocks.length]);

// ‚úÖ –ü—Ä–∏–≤—è–∑–∫–∞ –∫ —Å–µ—Ç–∫–µ —Å useCallback:
const snapToGrid = useCallback((x: number, y: number, width: number, height: number) => {
  // ... –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–≤—è–∑–∫–∏
}, []);
```

### 2. –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è:
```typescript
onMouseDown={(e) => {
  // –í—ã–±–∏—Ä–∞–µ–º –±–ª–æ–∫ —Å—Ä–∞–∑—É
  setSelectedBlockId(block.id);
  
  // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
  if (e.button === 0) {
    const startTime = Date.now();
    const startPos = { x: e.clientX, y: e.clientY };

    const handleMouseMove = (moveEvent: MouseEvent) => {
      const distance = Math.sqrt(
        Math.pow(moveEvent.clientX - startPos.x, 2) +
        Math.pow(moveEvent.clientY - startPos.y, 2)
      );

      // –ï—Å–ª–∏ –¥–≤–∏–∂–µ–Ω–∏–µ > 5px, –Ω–∞—á–∏–Ω–∞–µ–º –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
      if (distance > 5) {
        document.removeEventListener('mousemove', handleMouseMove);
        document.removeEventListener('mouseup', handleMouseUp);
        handleMouseDown(e, { id: block.id, type: block.type, source: 'canvas' });
      }
    };

    // –û—á–∏—Å—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
    const handleMouseUp = () => {
      document.removeEventListener('mousemove', handleMouseMove);
      document.removeEventListener('mouseup', handleMouseUp);
    };

    document.addEventListener('mousemove', handleMouseMove);
    document.addEventListener('mouseup', handleMouseUp);
  }
}}
```

## üéØ **–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**

### 1. –°—Ç–∞–±–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- ‚úÖ `createBlock` –æ–±–µ—Ä–Ω—É—Ç –≤ `useCallback` —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å—é `[blocks.length]`
- ‚úÖ `snapToGrid` –æ–±–µ—Ä–Ω—É—Ç –≤ `useCallback` —Å –ø—É—Å—Ç—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ `[]`
- ‚úÖ `handleMouseDown` –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ `[createBlock, blocks, snapToGridEnabled, snapToGrid]`

### 2. –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞:
- ‚úÖ **–ë–ª–æ–∫ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É** –ø—Ä–∏ –∫–ª–∏–∫–µ
- ‚úÖ **–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è** –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ > 5px
- ‚úÖ **–ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤** –º–µ–∂–¥—É –≤—ã–±–æ—Ä–æ–º –∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ–º
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞** —Å–æ–±—ã—Ç–∏–π –º—ã—à–∏

### 3. –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å:
- ‚úÖ **–í—ã–±–æ—Ä –±–ª–æ–∫–∞** - —Å–∏–Ω—è—è —Ä–∞–º–∫–∞ –∏ —Ä—É—á–∫–∏
- ‚úÖ **–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ** - –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ **–ö—É—Ä—Å–æ—Ä** - –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `cursor-grabbing`

## üöÄ **–ö–∞–∫ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç:**

### –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –±–ª–æ–∫–æ–≤:
1. **–ö–ª–∏–∫–Ω–∏—Ç–µ** –ø–æ –±–ª–æ–∫—É - –æ–Ω –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è (—Å–∏–Ω—è—è —Ä–∞–º–∫–∞)
2. **–ó–∞–∂–º–∏—Ç–µ** –∏ **–ø–æ—Ç—è–Ω–∏—Ç–µ** –±–ª–æ–∫ - –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
3. **–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ** –±–ª–æ–∫ –≤ –Ω—É–∂–Ω–æ–µ –º–µ—Å—Ç–æ
4. **–û—Ç–ø—É—Å—Ç–∏—Ç–µ** –∫–Ω–æ–ø–∫—É –º—ã—à–∏ - –±–ª–æ–∫ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ –Ω–æ–≤–æ–º –º–µ—Å—Ç–µ

### –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã:
- **–ü—Ä–∏ –≤—ã–±–æ—Ä–µ**: —Å–∏–Ω—è—è —Ä–∞–º–∫–∞, —Ä—É—á–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
- **–ü—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏**: –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å (opacity-50), —É–≤–µ–ª–∏—á–µ–Ω–∏–µ (scale-105)
- **–ü—Ä–∏ –ø—Ä–∏–≤—è–∑–∫–µ**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ —Å–µ—Ç–∫–µ

## üìã **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**

### –¢–µ—Å—Ç 1: –í—ã–±–æ—Ä –±–ª–æ–∫–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
2. –î–æ–±–∞–≤—å—Ç–µ –±–ª–æ–∫ "–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤"
3. **–ö–ª–∏–∫–Ω–∏—Ç–µ** –ø–æ –±–ª–æ–∫—É
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –±–ª–æ–∫ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è, –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–∏–Ω—è—è —Ä–∞–º–∫–∞

### –¢–µ—Å—Ç 2: –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –±–ª–æ–∫–∞
1. **–ó–∞–∂–º–∏—Ç–µ** –±–ª–æ–∫ –∏ –ø–æ—Ç—è–Ω–∏—Ç–µ –µ–≥–æ
2. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –±–ª–æ–∫ —Å–ª–µ–¥—É–µ—Ç –∑–∞ –º—ã—à—å—é, —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º

### –¢–µ—Å—Ç 3: –û—Ç–ø—É—Å–∫–∞–Ω–∏–µ –±–ª–æ–∫–∞
1. **–û—Ç–ø—É—Å—Ç–∏—Ç–µ** –∫–Ω–æ–ø–∫—É –º—ã—à–∏ –≤ –Ω–æ–≤–æ–º –º–µ—Å—Ç–µ
2. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –±–ª–æ–∫ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ –Ω–æ–≤–æ–º –ø–æ–ª–æ–∂–µ–Ω–∏–∏

### –¢–µ—Å—Ç 4: –ü—Ä–∏–≤—è–∑–∫–∞ –∫ —Å–µ—Ç–∫–µ
1. –í–∫–ª—é—á–∏—Ç–µ "–ü—Ä–∏–≤—è–∑–∫–∞ –∫ —Å–µ—Ç–∫–µ"
2. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –±–ª–æ–∫
3. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –±–ª–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è –ø–æ —Å–µ—Ç–∫–µ

## üéâ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

**–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –±–ª–æ–∫–æ–≤ –º—ã—à–∫–æ–π –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç!**

- ‚úÖ **–í—ã–±–æ—Ä –±–ª–æ–∫–æ–≤** - –∫–ª–∏–∫ –≤—ã–±–∏—Ä–∞–µ—Ç –±–ª–æ–∫
- ‚úÖ **–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ** - –∑–∞–∂–∞—Ç–∏–µ –∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç –±–ª–æ–∫
- ‚úÖ **–í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å** - —Å–∏–Ω—è—è —Ä–∞–º–∫–∞, –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å, –∫—É—Ä—Å–æ—Ä
- ‚úÖ **–ü—Ä–∏–≤—è–∑–∫–∞ –∫ —Å–µ—Ç–∫–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** - –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É —Å–æ–±—ã—Ç–∏—è–º–∏

**–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üé®‚ú®




