# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

## ‚úÖ **–û—à–∏–±–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!**

### üéØ **–ü—Ä–æ–±–ª–µ–º–∞:**
–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä" –ø–æ—è–≤–ª—è–ª–∞—Å—å –æ—à–∏–±–∫–∞:
**"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"**

### üîç **–ü—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏:**
API –ø—ã—Ç–∞–ª—Å—è —Å–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü–µ `category`, –Ω–æ –≤ —Å—Ö–µ–º–µ Prisma –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ `FrontendCategory`.

### üõ†Ô∏è **–ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**

#### **1. –û–±–Ω–æ–≤–ª–µ–Ω API —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π (`/api/admin/categories/route.ts`):**
- ‚ùå **–£–±—Ä–∞–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ** –∫ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü–µ `prisma.category`
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ** –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü–µ `prisma.frontendCategory`
- ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–ª—è** –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å–æ —Å—Ö–µ–º–æ–π `FrontendCategory`
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω –≤–æ–∑–≤—Ä–∞—Ç –¥–∞–Ω–Ω—ã—Ö** –≤ –æ—Ç–≤–µ—Ç–µ API

#### **2. –û–±–Ω–æ–≤–ª–µ–Ω API –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π:**
- ‚ùå **–£–±—Ä–∞–Ω—ã –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è** (`level`, `parent_id`, `sort_order`, `configurator_config`, etc.)
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è** (`catalog_category_ids`, `display_config`)
- ‚úÖ **–£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞** –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

#### **3. –û–±–Ω–æ–≤–ª–µ–Ω API –æ—Ç–¥–µ–ª—å–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (`/api/admin/categories/[id]/route.ts`):**
- ‚ùå **–£–±—Ä–∞–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ** –∫ `prisma.category`
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ** –∫ `prisma.frontendCategory`
- ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–ª—è** –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å–æ —Å—Ö–µ–º–æ–π

#### **4. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (`builder/page.tsx`):**
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω slug** –≤ –∑–∞–ø—Ä–æ—Å –∫ API
- ‚ùå **–£–±—Ä–∞–Ω –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä** `step`

#### **5. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ Prisma:**
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–≤—è–∑—å** `client` –≤ –º–æ–¥–µ–ª—å `Notification`
- ‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** —Å –ø–æ–º–æ—â—å—é `prisma db push`

### üîÑ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö FrontendCategory:**

#### **–ü–æ–ª—è –º–æ–¥–µ–ª–∏:**
```typescript
{
  id: string;                    // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
  name: string;                  // –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  slug: string;                  // URL-–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
  description: string?;          // –û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
  icon: string?;                 // –ò–∫–æ–Ω–∫–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ, –Ω–æ –º—ã –µ—ë —É–±—Ä–∞–ª–∏)
  catalog_category_ids: string;  // JSON –º–∞—Å—Å–∏–≤ ID –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∫–∞—Ç–∞–ª–æ–≥–∞
  display_config: string;        // JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
  is_active: boolean;            // –ê–∫—Ç–∏–≤–Ω–∞ –ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è
  created_at: DateTime;          // –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
  updated_at: DateTime;          // –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
}
```

#### **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ API –º–µ—Ç–æ–¥—ã:**

##### **POST /api/admin/categories** - –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:
```typescript
// –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
{
  name: string;        // –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  slug: string;        // URL-–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
  description?: string; // –û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
  isActive: boolean;   // –ê–∫—Ç–∏–≤–Ω–∞ –ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è
}

// –°–æ–∑–¥–∞–Ω–∏–µ –≤ –ë–î
await prisma.frontendCategory.create({
  data: {
    name,
    slug,
    description: description || '',
    is_active: true,
    catalog_category_ids: '[]',
    display_config: '{}'
  }
});
```

##### **GET /api/admin/categories** - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:
```typescript
const categories = await prisma.frontendCategory.findMany({
  orderBy: [{ name: 'asc' }]
});

// –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞
const formattedCategories = categories.map(category => ({
  id: category.id,
  name: category.name,
  slug: category.slug,
  description: category.description,
  isActive: category.is_active,
  catalogCategoryIds: JSON.parse(category.catalog_category_ids),
  displayConfig: JSON.parse(category.display_config),
  productsCount: 0, // –ü–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
  subcategoriesCount: 0, // –ü–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
}));
```

### üé® **–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ:**

#### **–§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:**
- ‚úÖ **–ü–æ–ª–µ "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ
- ‚úÖ **–ü–æ–ª–µ "Slug (URL-–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä)"** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ, –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ **–ü–æ–ª–µ "–û–ø–∏—Å–∞–Ω–∏–µ"** - –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ
- ‚úÖ **–ü–æ–ª–µ "–¢–∏–ø –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"** - –æ—Å–Ω–æ–≤–Ω–∞—è/–ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è
- ‚ùå **–ü–æ–ª–µ "–ò–∫–æ–Ω–∫–∞"** - —É–¥–∞–ª–µ–Ω–æ (–∫–∞–∫ –∏ –±—ã–ª–æ –∑–∞–ø—Ä–æ—à–µ–Ω–æ —Ä–∞–Ω–µ–µ)

#### **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:**
- ‚úÖ **–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏** –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π –∏–∫–æ–Ω–∫–æ–π `üì¶`
- ‚úÖ **–ù–µ—Ç —Ä–∞–∑–ª–∏—á–∏–π** –≤ –∏–∫–æ–Ω–∫–∞—Ö –º–µ–∂–¥—É –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
- ‚úÖ **–£–ø—Ä–æ—â–µ–Ω–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ** –±–µ–∑ –ª–∏—à–Ω–∏—Ö –ø–æ–ª–µ–π

### üöÄ **URL –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
**–°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏**: `http://localhost:3000/admin/categories/builder`

### üìã **–ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

#### **–¢–µ—Å—Ç 1: –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏**
1. **–û—Ç–∫—Ä–æ–π—Ç–µ** `/admin/categories/builder`
2. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É**:
   - –ù–∞–∑–≤–∞–Ω–∏–µ: "–î–≤–µ—Ä–∏ —Ç–µ—Å—Ç"
   - Slug: "dveri-test" (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è)
   - –û–ø–∏—Å–∞–Ω–∏–µ: "–ú–µ–∂–∫–æ–º–Ω–∞—Ç–Ω—ã–µ –¥–≤–µ—Ä–∏"
   - –¢–∏–ø: "–û—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è"
3. **–ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä"**
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ù–ï–¢ –æ—à–∏–±–∫–∏, –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —à–∞–≥ "–î–∞–Ω–Ω—ã–µ"

#### **–¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è**
1. **–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏** –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/admin/categories`
2. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –∫–∞—Ç–µ–≥–æ—Ä–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ**: –Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, —Å—Ç–∞—Ç—É—Å

#### **–¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ API**
1. **–û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools** (F12)
2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ Network** –≤–∫–ª–∞–¥–∫—É
3. **–°–æ–∑–¥–∞–π—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é**
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–ø—Ä–æ—Å** POST `/api/admin/categories`
5. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: —Å—Ç–∞—Ç—É—Å 200, —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç

### üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

#### **1. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö:**
```typescript
// –î–û (–Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –º–æ–¥–µ–ª—å)
await prisma.category.create({
  data: {
    name,
    slug,
    description,
    icon: 'üì¶',
    parent_id: parentId,
    level: 0,
    sort_order: 0,
    is_active: true,
    configurator_config: '{}',
    page_template: null,
    custom_layout: null,
    properties: '[]',
    import_mapping: '{}'
  }
});

// –ü–û–°–õ–ï (—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –º–æ–¥–µ–ª—å)
await prisma.frontendCategory.create({
  data: {
    name,
    slug,
    description: description || '',
    is_active: true,
    catalog_category_ids: '[]',
    display_config: '{}'
  }
});
```

#### **2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º—ã Prisma:**
```prisma
// –î–û (–Ω–µ–ø–æ–ª–Ω–∞—è —Å–≤—è–∑—å)
model Notification {
  id         String   @id @default(cuid())
  user_id    String
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
}

// –ü–û–°–õ–ï (–ø–æ–ª–Ω–∞—è —Å–≤—è–∑—å)
model Notification {
  id         String   @id @default(cuid())
  user_id    String
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
  
  // –°–≤—è–∑–∏
  client     Client   @relation(fields: [user_id], references: [id], onDelete: Cascade)
}
```

#### **3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**
```bash
npx prisma db push --schema=app/prisma/schema.prisma
# –†–µ–∑—É–ª—å—Ç–∞—Ç: Your database is now in sync with your Prisma schema
```

### üéâ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

**–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!**

- ‚úÖ **API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã
- ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞** - —Å—Ö–µ–º–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫–æ–¥—É
- ‚úÖ **–§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç** - –Ω–µ—Ç –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
- ‚úÖ **–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ
- ‚úÖ **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–æ—â–µ–Ω** - —É–±—Ä–∞–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è
- ‚úÖ **–ö–æ–¥ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

**–°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üé®‚ú®




