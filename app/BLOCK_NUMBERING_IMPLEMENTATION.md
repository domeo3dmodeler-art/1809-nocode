# ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω—É–º–µ—Ä–∞—Ü–∏–∏ –±–ª–æ–∫–æ–≤

## üéØ **–ü—Ä–æ–±–ª–µ–º–∞:**
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–≥ –ø–æ–Ω—è—Ç—å, –∫–∞–∫–æ–π –±–ª–æ–∫ –ø–µ—Ä–≤—ã–π, –∞ –∫–∞–∫–æ–π –≤—Ç–æ—Ä–æ–π –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–≤—è–∑–µ–π, —Ç–∞–∫ –∫–∞–∫ –≤—Å–µ –±–ª–æ–∫–∏ –∏–º–µ–ª–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è.

## üîß **–†–µ—à–µ–Ω–∏–µ:**
–î–æ–±–∞–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω—É–º–µ—Ä–∞—Ü–∏—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –±–ª–æ–∫–æ–≤ —Å —Ä—É—Å—Å–∫–∏–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏.

## üìã **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

### **1. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getDisplayName`:**
```typescript
// lib/block-names.ts
export function getDisplayName(type: string, existingElements: any[] = [], currentElementId?: string): string {
  const baseName = getBlockName(type);
  
  // –î–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ç–∏–ø–æ–≤ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–º–µ—Ä–∞
  const typesWithNumbers = [
    'propertyFilter',
    'productFilter', 
    'filteredProducts',
    'productCard',
    'productGallery',
    'productDetails',
    'priceDisplay',
    'summaryTable'
  ];
  
  if (typesWithNumbers.includes(type)) {
    return getBlockNameWithNumber(type, existingElements, currentElementId);
  }
  
  return baseName;
}
```

### **2. –£–ª—É—á—à–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getBlockNameWithNumber`:**
```typescript
export function getBlockNameWithNumber(type: string, existingElements: any[] = [], currentElementId?: string): string {
  const baseName = getBlockName(type);
  
  // –°—á–∏—Ç–∞–µ–º —Å–∫–æ–ª—å–∫–æ —É–∂–µ –µ—Å—Ç—å —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —ç—Ç–æ–≥–æ —Ç–∏–ø–∞ (–∏—Å–∫–ª—é—á–∞—è —Ç–µ–∫—É—â–∏–π)
  const sameTypeElements = existingElements.filter(el => el.type === type && el.id !== currentElementId);
  
  // –ï—Å–ª–∏ —ç—Ç–æ –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –±–µ–∑ –Ω–æ–º–µ—Ä–∞
  if (sameTypeElements.length === 0) {
    return baseName;
  }
  
  // –ò–Ω–∞—á–µ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–º–µ—Ä (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö + 1)
  return `${baseName} ${sameTypeElements.length + 1}`;
}
```

### **3. –û–±–Ω–æ–≤–ª–µ–Ω `SelectionOverlay`:**
- –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ–ø `allElements` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è `currentElementId` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ–¥—Å—á–µ—Ç–∞ –Ω–æ–º–µ—Ä–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `getDisplayName` –≤–º–µ—Å—Ç–æ `getBlockName`

### **4. –û–±–Ω–æ–≤–ª–µ–Ω `ElementRenderer`:**
- –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ–ø `allElements`
- –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `SelectionOverlay`

### **5. –û–±–Ω–æ–≤–ª–µ–Ω `Canvas`:**
- –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è `page?.elements` –≤ `ElementRenderer` –∫–∞–∫ `allElements`

### **6. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω API –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `properties` ‚Üí `properties_data` –≤ `/api/catalog/products/images/route.ts`

## üé® **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

### **–ù—É–º–µ—Ä–∞—Ü–∏—è –±–ª–æ–∫–æ–≤:**
- **"–§–∏–ª—å—Ç—Ä —Å–≤–æ–π—Å—Ç–≤"** (–ø–µ—Ä–≤—ã–π –±–ª–æ–∫)
- **"–§–∏–ª—å—Ç—Ä —Å–≤–æ–π—Å—Ç–≤ 2"** (–≤—Ç–æ—Ä–æ–π –±–ª–æ–∫)
- **"–§–∏–ª—å—Ç—Ä —Å–≤–æ–π—Å—Ç–≤ 3"** (—Ç—Ä–µ—Ç–∏–π –±–ª–æ–∫)
- **"–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤"** (–ø–µ—Ä–≤—ã–π –±–ª–æ–∫)
- **"–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ 2"** (–≤—Ç–æ—Ä–æ–π –±–ª–æ–∫)

### **–¢–∏–ø—ã —Å –Ω—É–º–µ—Ä–∞—Ü–∏–µ–π:**
- `propertyFilter` ‚Üí "–§–∏–ª—å—Ç—Ä —Å–≤–æ–π—Å—Ç–≤"
- `productFilter` ‚Üí "–§–∏–ª—å—Ç—Ä —Ç–æ–≤–∞—Ä–æ–≤"
- `filteredProducts` ‚Üí "–û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã"
- `productCard` ‚Üí "–ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞"
- `productGallery` ‚Üí "–ì–∞–ª–µ—Ä–µ—è —Ç–æ–≤–∞—Ä–∞"
- `productDetails` ‚Üí "–î–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–∞"
- `priceDisplay` ‚Üí "–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ü–µ–Ω—ã"
- `summaryTable` ‚Üí "–°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞"

## üß™ **–ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**

### **1. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±–ª–æ–∫–æ–≤:**
1. **–î–æ–±–∞–≤—å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–ª–æ–∫–æ–≤ "–§–∏–ª—å—Ç—Ä —Å–≤–æ–π—Å—Ç–≤"** –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
2. **–í—ã–¥–µ–ª–∏—Ç–µ –∫–∞–∂–¥—ã–π –±–ª–æ–∫** - –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–æ–º–µ—Ä–∞:
   - –ü–µ—Ä–≤—ã–π: "–§–∏–ª—å—Ç—Ä —Å–≤–æ–π—Å—Ç–≤"
   - –í—Ç–æ—Ä–æ–π: "–§–∏–ª—å—Ç—Ä —Å–≤–æ–π—Å—Ç–≤ 2"
   - –¢—Ä–µ—Ç–∏–π: "–§–∏–ª—å—Ç—Ä —Å–≤–æ–π—Å—Ç–≤ 3"

### **2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–≤—è–∑–µ–π:**
1. **–í—ã–¥–µ–ª–∏—Ç–µ –¥–≤–∞ –±–ª–æ–∫–∞ PropertyFilter** (Ctrl + –∫–ª–∏–∫)
2. **–í –º–µ–Ω—é —Å–æ–∑–¥–∞–Ω–∏—è —Å–≤—è–∑–µ–π** —Ç–µ–ø–µ—Ä—å –ø–æ–Ω—è—Ç–Ω–æ:
   - "–§–∏–ª—å—Ç—Ä—ã ‚Üí (–æ—Ç –ø–µ—Ä–≤–æ–≥–æ –∫–æ –≤—Ç–æ—Ä–æ–º—É)" - –æ—Ç "–§–∏–ª—å—Ç—Ä —Å–≤–æ–π—Å—Ç–≤" –∫ "–§–∏–ª—å—Ç—Ä —Å–≤–æ–π—Å—Ç–≤ 2"
   - "–§–∏–ª—å—Ç—Ä—ã ‚Üê (–æ—Ç –≤—Ç–æ—Ä–æ–≥–æ –∫ –ø–µ—Ä–≤–æ–º—É)" - –æ—Ç "–§–∏–ª—å—Ç—Ä —Å–≤–æ–π—Å—Ç–≤ 2" –∫ "–§–∏–ª—å—Ç—Ä —Å–≤–æ–π—Å—Ç–≤"

### **3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Ç—É–ª—Ç–∏–ø–µ:**
1. **–ù–∞–≤–µ–¥–∏—Ç–µ –Ω–∞ –±–ª–æ–∫** - –≤ —Ç—É–ª—Ç–∏–ø–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å –Ω–æ–º–µ—Ä–æ–º
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ ID –±–ª–æ–∫–∞** - –¥–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üìã **–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**

1. **`lib/block-names.ts`**
   - –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ `getDisplayName` –∏ `getBlockNameWithNumber`
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `currentElementId`

2. **`components/page-builder/elements/SelectionOverlay.tsx`**
   - –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ–ø `allElements`
   - –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è `currentElementId` –≤ `getDisplayName`

3. **`components/page-builder/elements/ElementRenderer.tsx`**
   - –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ–ø `allElements`
   - –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `SelectionOverlay`

4. **`components/page-builder/layout/Canvas.tsx`**
   - –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è `page?.elements` –≤ `ElementRenderer`

5. **`app/api/catalog/products/images/route.ts`**
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `properties` ‚Üí `properties_data`

## ‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- ‚úÖ **–ù–æ–º–µ—Ä–∞ –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö** - –±–ª–æ–∫–∏ –∏–º–µ—é—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è
- ‚úÖ **–ü–æ–Ω—è—Ç–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑–µ–π** - —è—Å–Ω–æ, –∫–∞–∫–æ–π –±–ª–æ–∫ –ø–µ—Ä–≤—ã–π, –∫–∞–∫–æ–π –≤—Ç–æ—Ä–æ–π
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç** - –Ω–æ–º–µ—Ä–∞ —É—á–∏—Ç—ã–≤–∞—é—Ç –ø–æ—Ä—è–¥–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ API** - –Ω–µ—Ç –æ—à–∏–±–æ–∫ Prisma
- ‚úÖ **–†—É—Å—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è** - –≤—Å–µ –±–ª–æ–∫–∏ –∏–º–µ—é—Ç —Ä—É—Å—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è

---

**–¢–µ–ø–µ—Ä—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–≤—è–∑–µ–π –ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫–æ–π –±–ª–æ–∫ –ø–µ—Ä–≤—ã–π, –∞ –∫–∞–∫–æ–π –≤—Ç–æ—Ä–æ–π! üöÄ**

